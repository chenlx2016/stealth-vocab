# Stealth Vocab 开发任务清单

## 📋 项目概述

**项目名称**: 潜行者词库 (Stealth Vocab) MVP
**目标**: 开发一个隐蔽的IELTS词汇学习浏览器扩展，利用工作碎片时间进行高效复习
**技术栈**: Chrome Extension Manifest V3 + 原生 HTML/CSS/JavaScript

---

## 🎯 开发目标

- **性能要求**: 所有交互响应时间 < 150ms
- **隐蔽性**: 深色低对比度UI，适合办公环境
- **可靠性**: 状态100%持久化，浏览器重启后恢复
- **兼容性**: 支持Chrome/Edge等Chromium内核浏览器

---

## 📁 任务分类

### Phase 1: 项目基础架构 (1-2小时)

#### 1.1 项目结构初始化
- [ ] **1.1.1** 创建主项目目录结构
  - 创建 `data/` 目录 (存放词汇数据)
  - 创建 `utils/` 目录 (存放工具函数)
- [ ] **1.1.2** 创建基础文件框架
  - 创建空白的 `manifest.json`
  - 创建空白的 `background.js`
  - 创建空白的 `sidepanel.html`
  - 创建空白的 `sidepanel.js`
  - 创建空白的 `sidepanel.css`
  - 创建空白的 `utils/storage.js`
  - 创建空白的 `utils/algorithm.js`
  - 创建空白的 `data/vocabulary.json`

#### 1.2 扩展配置 (manifest.json)
- [ ] **1.2.1** 基础配置
  - 设置 `manifest_version: 3`
  - 配置扩展名称、版本、描述
  - 设置图标文件路径
- [ ] **1.2.2** 权限配置
  - 添加 `storage` 权限
  - 添加 `sidePanel` 权限
- [ ] **1.2.3** 后台脚本配置
  - 配置 `background.service_worker`
- [ ] **1.2.4** 侧边栏配置
  - 设置 `side_panel.default_path` 为 "sidepanel.html"
- [ ] **1.2.5** 快捷键配置
  - 注册 `Ctrl+Shift+V` 快捷键命令

#### 1.3 基础Side Panel
- [ ] **1.3.1** 创建基础HTML结构
  - 设置基本的HTML5文档结构
  - 引入CSS和JS文件
- [ ] **1.3.2** 基础CSS样式
  - 设置深色主题基础样式
  - 配置基本的布局结构
- [ ] **1.3.3** 验证扩展加载
  - 在Chrome中测试扩展安装
  - 确认Side Panel可以正常打开

---

### Phase 2: 核心UI开发 (3-4小时)

#### 2.1 界面布局设计 (C3模块)
- [ ] **2.1.1** 容器结构设计
  - 创建 `.stealth-container` 主容器
  - 设置窄高侧边栏布局 (280px宽度)
- [ ] **2.1.2** 进度指示器区域
  - 创建进度显示组件
  - 设置"今日已复习 X 个词"文案样式
- [ ] **2.1.3** 词汇卡片区域
  - 设计 `.vocabulary-card` 容器
  - 创建卡片正面 (中文释义显示)
  - 创建卡片背面 (英文+音标显示)
- [ ] **2.1.4** 反馈按钮区域
  - 创建三态按钮布局
  - 设计按钮样式 (✅掌握 / ❓模糊 / ❌遗忘)

#### 2.2 深色低对比度主题
- [ ] **2.2.1** 色彩系统定义
  - 定义CSS变量: `--background`, `--surface`, `--text-primary` 等
  - 设置低对比度颜色值
- [ ] **2.2.2** 文字样式设计
  - 设置基础字体大小 14px
  - 配置文字颜色为低对比度灰色
- [ ] **2.2.3** 边框和分割线
  - 最小化边框使用
  - 设置极细的分割线样式
- [ ] **2.2.4** 按钮样式优化
  - 设计低调的按钮样式
  - 配置hover和active状态
  - 确保按钮尺寸适合快速点击

#### 2.3 组件样式实现
- [ ] **2.3.1** 词汇卡片样式
  - 设置卡片背景和边框
  - 配置内容区域布局
  - 确保中英文内容的可读性
- [ ] **2.3.2** 反馈按钮样式
  - 三种状态按钮的差异化设计
  - 按钮间距和布局优化
- [ ] **2.3.3** 进度指示器样式
  - 极简的数字显示设计
  - 位置和大小调整

---

### Phase 3: 交互逻辑实现 (2-3小时)

#### 3.1 快捷键系统 (C1模块)
- [ ] **3.1.1** 背景脚本快捷键监听
  - 在 `background.js` 中监听 `chrome.commands.onCommand`
  - 实现快捷键响应逻辑
- [ ] **3.1.2** Side Panel显示/隐藏控制
  - 实现Side Panel的打开逻辑
  - 实现Side Panel的关闭逻辑
  - 确保响应时间 < 100ms
- [ ] **3.1.3** 快捷键冲突检测
  - 测试与其他软件的快捷键冲突
  - 实现基本的冲突处理机制

#### 3.2 卡片翻面功能 (C4模块)
- [ ] **3.2.1** 点击翻面实现
  - 为词汇卡片添加点击事件监听
  - 实现正面/背面切换逻辑
- [ ] **3.2.2** 空格键翻面支持
  - 监听键盘空格键事件
  - 实现键盘翻面功能
- [ ] **3.2.3** 翻面状态保存
  - 实时保存当前翻面状态
  - 确保状态持久化

#### 3.3 基础状态管理 (C2模块)
- [ ] **3.3.1** 当前词汇状态保存
  - 保存当前显示的词汇ID
  - 保存当前翻面状态
  - 保存复习列表索引
- [ ] **3.3.2** 状态恢复逻辑
  - 实现从存储中恢复状态
  - 确保重新打开时显示正确内容
- [ ] **3.3.3** 状态同步机制
  - 背景脚本与侧边栏状态同步
  - 实现实时状态更新

---

### Phase 4: 数据和算法实现 (2-3小时)

#### 4.1 存储系统开发 (D1模块)
- [ ] **4.1.1** 存储工具类开发 (`utils/storage.js`)
  - 创建 `StorageManager` 类
  - 实现 `getStudyState()` 方法
  - 实现 `updateStudyState()` 方法
  - 实现 `getVocabularyData()` 方法
- [ ] **4.1.2** 数据结构初始化
  - 定义学习状态数据结构
  - 定义词汇数据结构
  - 实现数据初始化逻辑
- [ ] **4.1.3** 数据持久化测试
  - 测试状态数据的保存和读取
  - 验证浏览器重启后数据恢复

#### 4.2 复习算法实现 (C6模块)
- [ ] **4.2.1** 算法基础逻辑 (`utils/algorithm.js`)
  - 创建 `ReviewAlgorithm` 类
  - 实现 `getNextWord()` 方法
- [ ] **4.2.2** 优先级算法
  - 实现"遗忘"词汇优先逻辑
  - 实现固定顺序展示逻辑
  - 实现复习队列管理
- [ ] **4.2.3** 词汇状态更新
  - 实现词汇掌握状态更新
  - 实现复习进度统计

#### 4.3 词汇数据准备
- [ ] **4.3.1** 基础词汇数据 (`data/vocabulary.json`)
  - 准备50-100个IELTS核心词汇
  - 包含中文释义、英文单词、音标
- [ ] **4.3.2** 数据格式标准化
  - 统一词汇数据格式
  - 添加词汇难度和分类信息
- [ ] **4.3.3** 数据加载优化
  - 实现按需加载机制
  - 优化数据读取性能

#### 4.4 反馈系统实现 (C5模块)
- [ ] **4.4.1** 三态反馈按钮功能
  - 实现"掌握"按钮点击逻辑
  - 实现"模糊"按钮点击逻辑
  - 实现"遗忘"按钮点击逻辑
- [ ] **4.4.2** 状态实时存储
  - 反馈后立即更新词汇状态
  - 同步更新复习进度
- [ ] **4.4.3** 自动跳转逻辑
  - 反馈后自动加载下一个词汇
  - 确保跳转过程流畅

#### 4.5 进度追踪系统
- [ ] **4.5.1** 进度统计实现
  - 实现今日复习计数逻辑
  - 实现进度显示更新
- [ ] **4.5.2** 每日重置逻辑
  - 实现每日0点进度重置
  - 处理跨日期使用场景
- [ ] **4.5.3** 进度数据可视化
  - 实现进度数字的实时更新
  - 优化进度显示样式

---

### Phase 5: 优化和测试 (1-2小时)

#### 5.1 性能优化
- [ ] **5.1.1** 响应时间优化
  - 测试所有交互的响应时间
  - 确保所有操作 < 150ms
  - 优化关键路径性能
- [ ] **5.1.2** 内存优化
  - 检查内存泄漏问题
  - 优化DOM操作和事件监听
- [ ] **5.1.3** 存储优化
  - 批量化存储操作
  - 减少不必要的存储读写

#### 5.2 功能测试
- [ ] **5.2.1** 核心功能测试
  - 测试快捷键显示/隐藏功能
  - 测试状态恢复功能
  - 测试翻面和反馈功能
- [ ] **5.2.2** 数据完整性测试
  - 测试状态持久化
  - 测试浏览器重启恢复
  - 测试数据损坏处理
- [ ] **5.2.3** 用户体验测试
  - 模拟真实使用场景
  - 测试碎片时间学习流程

#### 5.3 兼容性测试
- [ ] **5.3.1** 浏览器兼容性
  - 在Chrome中测试
  - 在Edge中测试
  - 验证不同版本兼容性
- [ ] **5.3.2** 快捷键冲突测试
  - 测试与Office Web的冲突
  - 测试与Slack Web的冲突
  - 测试与Google Docs的冲突

#### 5.4 隐蔽性优化
- [ ] **5.4.1** 视觉隐蔽性检查
  - 在办公环境测试UI隐蔽性
  - 调整颜色对比度
  - 优化界面布局
- [ ] **5.4.2** 操作隐蔽性优化
  - 确保快速显示/隐藏
  - 优化操作流畅性

---

## 📊 任务优先级

### 🔥 高优先级 (MVP核心功能)
1. **快捷键系统** (C1) - 核心交互入口
2. **状态恢复** (C2) - 用户体验关键
3. **基础UI** (C3) - 用户界面基础
4. **翻面功能** (C4) - 核心学习流程

### ⚡ 中优先级 (完整功能)
5. **反馈系统** (C5) - 学习效果关键
6. **复习算法** (C6) - 智能化体验
7. **进度追踪** (D1) - 激励机制

### 🔧 低优先级 (优化完善)
8. **性能优化** - 提升用户体验
9. **兼容性测试** - 扩大用户范围
10. **隐蔽性优化** - 增强产品特色

---

## ✅ 验收标准

### 功能验收
- [ ] 快捷键 `Ctrl+Shift+V` 能瞬间显示/隐藏侧边栏 (< 100ms)
- [ ] 重新打开时能精确恢复到之前的状态
- [ ] 点击卡片或按空格键能正常翻面
- [ ] 三态反馈按钮功能正常
- [ ] 进度统计准确且实时更新

### 性能验收
- [ ] 所有交互响应时间 < 150ms
- [ ] 浏览器重启后状态100%恢复
- [ ] 内存使用稳定，无明显泄漏

### 用户体验验收
- [ ] UI界面低对比度，适合办公环境
- [ ] 操作流程简单直观
- [ ] 学习效果符合预期

---

## 📈 时间估算

| **阶段** | **预计时间** | **关键里程碑** |
|----------|-------------|---------------|
| Phase 1: 基础架构 | 1-2小时 | 扩展可正常加载 |
| Phase 2: UI开发 | 3-4小时 | 界面符合隐蔽要求 |
| Phase 3: 交互逻辑 | 2-3小时 | 基本交互流程完成 |
| Phase 4: 数据算法 | 2-3小时 | 完整学习功能实现 |
| Phase 5: 优化测试 | 1-2小时 | MVP版本完成 |
| **总计** | **9-14小时** | **MVP可交付** |

---

## 🎯 成功指标

- **技术指标**: 所有功能按设计要求实现
- **性能指标**: 响应时间和稳定性达标
- **用户体验**: 界面隐蔽，操作流畅
- **可维护性**: 代码结构清晰，易于扩展

---

*最后更新: 2025-11-21*
*文档版本: V1.0*